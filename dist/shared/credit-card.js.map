{"version":3,"file":"credit-card.js","sourceRoot":"","sources":["../../src/shared/credit-card.ts"],"names":[],"mappings":"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","sourcesContent":["let defaultFormat = /(\\d{1,4})/g;\r\nlet cards = [\r\n  {\r\n    type: 'maestro',\r\n    patterns: [5018, 502, 503, 506, 56, 58, 639, 6220, 67],\r\n    format: defaultFormat,\r\n    length: [12, 13, 14, 15, 16, 17, 18, 19],\r\n    cvvLength: [3],\r\n    luhn: true\r\n  }, {\r\n    type: 'forbrugsforeningen',\r\n    patterns: [600],\r\n    format: defaultFormat,\r\n    length: [16],\r\n    cvvLength: [3],\r\n    luhn: true\r\n  }, {\r\n    type: 'dankort',\r\n    patterns: [5019],\r\n    format: defaultFormat,\r\n    length: [16],\r\n    cvvLength: [3],\r\n    luhn: true\r\n  }, {\r\n    type: 'visa',\r\n    patterns: [4],\r\n    format: defaultFormat,\r\n    length: [13, 16],\r\n    cvvLength: [3],\r\n    luhn: true\r\n  }, {\r\n    type: 'mastercard',\r\n    patterns: [51, 52, 53, 54, 55, 22, 23, 24, 25, 26, 27],\r\n    format: defaultFormat,\r\n    length: [16],\r\n    cvvLength: [3],\r\n    luhn: true\r\n  }, {\r\n    type: 'amex',\r\n    patterns: [34, 37],\r\n    format: /(\\d{1,4})(\\d{1,6})?(\\d{1,5})?/,\r\n    length: [15],\r\n    cvvLength: [3, 4],\r\n    luhn: true\r\n  }, {\r\n    type: 'dinersclub',\r\n    patterns: [30, 36, 38, 39],\r\n    format: /(\\d{1,4})(\\d{1,6})?(\\d{1,4})?/,\r\n    length: [14],\r\n    cvvLength: [3],\r\n    luhn: true\r\n  }, {\r\n    type: 'discover',\r\n    patterns: [60, 64, 65, 622],\r\n    format: defaultFormat,\r\n    length: [16],\r\n    cvvLength: [3],\r\n    luhn: true\r\n  }, {\r\n    type: 'unionpay',\r\n    patterns: [62, 88],\r\n    format: defaultFormat,\r\n    length: [16, 17, 18, 19],\r\n    cvvLength: [3],\r\n    luhn: false\r\n  }, {\r\n    type: 'jcb',\r\n    patterns: [35],\r\n    format: defaultFormat,\r\n    length: [16],\r\n    cvvLength: [3],\r\n    luhn: true\r\n  }\r\n];\r\n\r\nexport class CreditCard {\r\n\r\n  public static cards() {\r\n    return cards;\r\n  }\r\n\r\n  public static cardFromNumber(num) {\r\n    let card,\r\n        p,\r\n        pattern,\r\n        ref;\r\n    num = (num + '').replace(/\\D/g, '');\r\n\r\n    for (let i = 0, len = cards.length; i < len; i++) {\r\n      card = cards[i];\r\n      ref = card.patterns;\r\n\r\n      for (let j = 0, len1 = ref.length; j < len1; j++) {\r\n        pattern = ref[j];\r\n        p = pattern + '';\r\n\r\n        if (num.substr(0, p.length) === p) {\r\n          return card;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static restrictNumeric(e): boolean {\r\n    let input;\r\n    if (e.metaKey || e.ctrlKey) {\r\n      return true;\r\n    }\r\n    if (e.which === 32) {\r\n      return false;\r\n    }\r\n    if (e.which === 0) {\r\n      return true;\r\n    }\r\n    if (e.which < 33) {\r\n      return true;\r\n    }\r\n    input = String.fromCharCode(e.which);\r\n    return !!/[\\d\\s]/.test(input);\r\n  }\r\n\r\n  public static hasTextSelected(target) {\r\n    return target.selectionStart !== null && target.selectionStart !== target.selectionEnd;\r\n  }\r\n\r\n  public static cardType(num) {\r\n    if (!num) {\r\n      return num;\r\n    }\r\n\r\n    let card = this.cardFromNumber(num);\r\n\r\n    if (card !== null && typeof card !== 'undefined') {\r\n      return card.type;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static formatCardNumber(num) {\r\n    let card,\r\n        groups,\r\n        upperLength;\r\n\r\n    num = num.replace(/\\D/g, '');\r\n    card = this.cardFromNumber(num);\r\n\r\n    if (!card) {\r\n      return num;\r\n    }\r\n\r\n    upperLength = card.length[card.length.length - 1];\r\n    num = num.slice(0, upperLength);\r\n\r\n    if (card.format.global) {\r\n      let matches = num.match(card.format);\r\n      if (matches != null) {\r\n        return matches.join(' ');\r\n      }\r\n    } else {\r\n      groups = card.format.exec(num);\r\n      if (groups == null) {\r\n        return;\r\n      }\r\n      groups.shift();\r\n      return groups.filter(Boolean).join(' ');\r\n    }\r\n  }\r\n\r\n  public static safeVal(value, target) {\r\n    let cursor = null,\r\n        last   = target.value,\r\n        result: any = null;\r\n\r\n    try {\r\n      cursor = target.selectionStart;\r\n    } catch (error) {}\r\n\r\n    target.value = value;\r\n\r\n    if (cursor !== null && target === document.activeElement) {\r\n      if (cursor === last.length) {\r\n        cursor = value.length;\r\n      }\r\n\r\n      if (last !== value) {\r\n        let prevPair = last.slice(cursor - 1, +cursor + 1 || 9e9),\r\n            currPair = value.slice(cursor - 1, +cursor + 1 || 9e9),\r\n            digit = value[cursor];\r\n\r\n        if (/\\d/.test(digit) && prevPair === (`${digit} `) && currPair === (` ${digit}`)) {\r\n          cursor = cursor + 1;\r\n        }\r\n      }\r\n\r\n     result = cursor;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public static isCardNumber(key, target) {\r\n    let card,\r\n        digit,\r\n        value,\r\n        result;\r\n    digit = String.fromCharCode(key);\r\n    if (!/^\\d+$/.test(digit)) {\r\n      return false;\r\n    }\r\n    if (CreditCard.hasTextSelected(target)) {\r\n      return true;\r\n    }\r\n    value = (target.value + digit).replace(/\\D/g, '');\r\n    card = CreditCard.cardFromNumber(value);\r\n    if (card) {\r\n      result = value.length <= card.length[card.length.length - 1];\r\n    } else {\r\n      result = value.length <= 16;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  public static restrictExpiry(key, target) {\r\n    let digit,\r\n        value;\r\n    digit = String.fromCharCode(key);\r\n    if (!/^\\d+$/.test(digit) || this.hasTextSelected(target)) {\r\n      return false;\r\n    }\r\n    value = `${target.value}${digit}`.replace(/\\D/g, '');\r\n\r\n    return value.length > 6;\r\n  }\r\n\r\n  public static replaceFullWidthChars(str) {\r\n    if (str === null) {\r\n      str = '';\r\n    }\r\n\r\n    let chr,\r\n        idx,\r\n        fullWidth = '\\uff10\\uff11\\uff12\\uff13\\uff14\\uff15\\uff16\\uff17\\uff18\\uff19',\r\n        halfWidth = '0123456789',\r\n        value = '',\r\n        chars = str.split('');\r\n\r\n    for (let i = 0; i < chars.length; i++) {\r\n      chr = chars[i];\r\n      idx = fullWidth.indexOf(chr);\r\n      if (idx > -1) {\r\n        chr = halfWidth[idx];\r\n      }\r\n      value += chr;\r\n    }\r\n    return value;\r\n  }\r\n\r\n  public static formatExpiry(expiry) {\r\n    let parts = expiry.match(/^\\D*(\\d{1,2})(\\D+)?(\\d{1,4})?/),\r\n        mon,\r\n        sep,\r\n        year;\r\n\r\n    if (!parts) {\r\n      return '';\r\n    }\r\n\r\n    mon  = parts[1] || '';\r\n    sep  = parts[2] || '';\r\n    year = parts[3] || '';\r\n\r\n    if (year.length > 0) {\r\n      sep = ' / ';\r\n    } else if (sep === ' /') {\r\n      mon = mon.substring(0, 1);\r\n      sep = '';\r\n    } else if (mon.length === 2 || sep.length > 0) {\r\n      sep = ' / ';\r\n    } else if (mon.length === 1 && (mon !== '0' && mon !== '1')) {\r\n      mon = `0${mon}`;\r\n      sep = ' / ';\r\n    }\r\n    return `${mon}${sep}${year}`;\r\n  }\r\n\r\n  public static restrictCvc(key, target) {\r\n    let digit = String.fromCharCode(key);\r\n    if (!/^\\d+$/.test(digit) || this.hasTextSelected(target)) {\r\n      return false;\r\n    }\r\n    let val = `${target.value}${digit}`;\r\n    return val.length <= 4;\r\n  }\r\n\r\n  public static luhnCheck(num) {\r\n    let digit,\r\n        digits = num.split('').reverse(),\r\n        odd    = true,\r\n        sum    = 0;\r\n\r\n    for (let i = 0; i < digits.length; i++) {\r\n      digit = digits[i];\r\n      digit = parseInt(digit, 10);\r\n      if ((odd = !odd)) {\r\n        digit *= 2;\r\n      }\r\n      if (digit > 9) {\r\n        digit -= 9;\r\n      }\r\n      sum += digit;\r\n    }\r\n\r\n    return sum % 10 === 0;\r\n  }\r\n}\r\n"]}